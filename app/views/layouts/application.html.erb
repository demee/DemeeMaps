<!DOCTYPE html>
<html>
	<head>
		<title>MQLite</title>
		<%= csrf_meta_tags %>
		<link rel="stylesheet" type="text/css" href="/Leaflet/dist/leaflet.css"/>
		<link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.css"/>
		<link rel="stylesheet/less" type="text/css" href="/css/style.less">
		<script src="/less-1.3.0.min.js"></script>
		<%= stylesheet_link_tag  "application", :media => "all" %>		
	</head>
    <body class="yui3-skin-night <%= @current_controller %>-controller <%= @current_action %>-action">
    	<div id="lhp">
    		<div class="navbar">
				<div class="navbar-inner">
					<div class="container">
						<a class="brand" href="/home" data-target="#"><strong>Mapquest <sup>&reg;</sup></strong> [hackerspace]</a>
						<ul class="nav">
							<li id="search-btn" class="active">
								<a href="/search"  data-toggle="dropdown" data-target="#"> Search <i class="icon-chevron-down icon-white"></i></a>								
							</li>
							<li id="collaborate-btn" class="inactive">
								<a href="/collaborate"  data-toggle="dropdown" data-target="#"> Collaborate <i class="icon-chevron-down icon-white"></i></a>								
							</li>
						</ul>
					</div>
				</div>
			</div>
			<div id="lhp-content">
			  	<form class="pull-left">				    
				    <input name="location" type="text" class="search-from" placeholder="Type in Location" data-provide="typeahead" value="<%= @query %>"/>
			  	</form>
			  	<button id="get-directions" class="btn btn-primary">Get Directions</button>
			  	
			  	<div id="search-results">
			        <%= yield %>
			    </div>
			 
			</div>
			<div id="lhp-collaborate"  class="hidden">			  	
			  	<div id="itinerary">
			      <ul></ul>
			    </div>
			</div>
		</div>
		
		<div id="map"></div>
				
		<!-- JS -->
<script type="text/javascript" src="http://yui.yahooapis.com/combo?3.5.1/build/yui-base/yui-base-min.js&3.5.1/build/attribute-core/attribute-core-min.js&3.5.1/build/base-core/base-core-min.js&3.5.1/build/oop/oop-min.js&3.5.1/build/event-custom-base/event-custom-base-min.js&3.5.1/build/event-custom-complex/event-custom-complex-min.js&3.5.1/build/attribute-events/attribute-events-min.js&3.5.1/build/attribute-extras/attribute-extras-min.js&3.5.1/build/attribute-base/attribute-base-min.js&3.5.1/build/base-base/base-base-min.js&3.5.1/build/pluginhost-base/pluginhost-base-min.js&3.5.1/build/pluginhost-config/pluginhost-config-min.js&3.5.1/build/base-pluginhost/base-pluginhost-min.js&3.5.1/build/base-build/base-build-min.js&3.5.1/build/features/features-min.js&3.5.1/build/dom-core/dom-core-min.js&3.5.1/build/dom-base/dom-base-min.js&3.5.1/build/selector-native/selector-native-min.js&3.5.1/build/selector/selector-min.js&3.5.1/build/node-core/node-core-min.js&3.5.1/build/node-base/node-base-min.js&3.5.1/build/event-base/event-base-min.js"></script>
<script type="text/javascript" src="http://yui.yahooapis.com/combo?3.5.1/build/querystring-stringify-simple/querystring-stringify-simple-min.js&3.5.1/build/io-base/io-base-min.js&3.5.1/build/json-parse/json-parse-min.js&3.5.1/build/json-stringify/json-stringify-min.js&3.5.1/build/array-extras/array-extras-min.js&3.5.1/build/querystring-parse/querystring-parse-min.js&3.5.1/build/yui/yui-min.js&3.5.1/build/yui-log/yui-log-min.js"></script>
		<script src="/jquery-1.7.2.min.js"></script>
		<script src="/bootstrap/js/bootstrap.js"></script>
		<script src="/Leaflet/dist/leaflet.js"></script>
		<script src="http://www.mapquestapi.com/sdk/js/v7.0.s/mqa.toolkit.js?key=<%= APP_CONFIG["mapquest_api_key"] %>"></script> 
		<script src="/js/modules-config.js"></script>
		<script src="/js/mqlite-application.js"></script>
		<script src="/js/main.js"></script>
		<script src="/js/navbar.js"></script>
		<script src="http://js.pusher.com/1.11/pusher.min.js" type="text/javascript"></script>
        <script type="text/javascript">
    		// Enable pusher logging - don't include this in production
    		Pusher.log = function(message) {
      			if (window.console && window.console.log) window.console.log(message);
    		};

    		// Flash fallback logging - don't include this in production
    		WEB_SOCKET_DEBUG = true;

		    var pusher = new Pusher('39def9c4196cbd0bee85');
    		
    		
    		
  		</script>
		<%= javascript_include_tag "application" %>
		<script>
			MQ_DATA = {
				<% if @search_results %>
				search: <%=raw @search_results.to_json %>
				<% end %>
				<% if @dir_results %>
				directions: <%=raw @dir_results.to_json %>
				<% end %>	
				<% if @collection_results %>
				collections: <%=raw @collection_results.to_json %>
				<% end %>
			}
		</script>
	</body>
</html>